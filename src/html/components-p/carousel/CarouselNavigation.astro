---
type NavDirective = {
  /**
   * The index number of the slide the link is pointing
   */
  pointsTo: number,
  /**
   * The rendered text of the link
   */
  text: string,
};

interface Props {
  carouselSlides: Array<Element>
  carouselId: string,
  navigationDirectives: Array<NavDirective>,

  /**
   * The slide on which the carousel will point at first render - (1 is first)
   */
  startingSlide?: number
};

const {
  carouselSlides,
  carouselId,
  navigationDirectives,
  startingSlide = 1,
} = Astro.props;
---

{
  (! navigationDirectives) &&
  <ul class="carousel__navigation">
    {
      carouselSlides.map((slide: Element, i: number) => (
        <li>
          <a
            data-index={i + 1} 
            href={`#${carouselId}-slide-${i + 1}`} 
            class={`carousel__scroll-marker ${i + 1 === startingSlide ? "target-current" : ""}`}
          >
            <span aria-hidden="true" class="carousel__scroll-marker--icon"></span>
          </a>
        </li>
      ))
    }
  </ul>
}
{
  (navigationDirectives) &&
  <ul class="carousel__navigation">
    {
      navigationDirectives.map((directive: NavDirective) => (
        <li><a href={`#${carouselId}-slide-${directive.pointsTo}`}> {directive.text} </a></li>
      ))
    }
  </ul>
}


<script>
  const navigationModule = await import('src/javascript/components/carousel/navigation/init-navigation');
  navigationModule.initNavigation('null');
  // Note - Questo component porta con s√® lo script della navigation
  // Note - Credo che dovrebbe essere global
</script>